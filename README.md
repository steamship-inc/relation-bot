# relation-bot ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®Œäº†å¾Œã®æœ€çµ‚çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
relation-bot/
â”œâ”€â”€ docs/                        # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ architecture.md
â”‚   â””â”€â”€ refactoring.md
â”œâ”€â”€ menu/                        # Google Apps Script UI
â”‚   â”œâ”€â”€ menu.js                  # ãƒ¡ãƒ‹ãƒ¥ãƒ¼å®šç¾©
â”‚   â”œâ”€â”€ sidebar_manager.js       # ã‚µã‚¤ãƒ‰ãƒãƒ¼ç®¡ç†
â”‚   â””â”€â”€ slack_menu_wrapper.js    # Slackãƒ¡ãƒ‹ãƒ¥ãƒ¼é€£æº
â”œâ”€â”€ relation/                    # re:lation APIé–¢é€£æ©Ÿèƒ½
â”‚   â”œâ”€â”€ mainController.js        # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ businessLogic.js         # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ dataService.js           # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤
â”‚   â”œâ”€â”€ apiHelpers.js            # APIå…±é€šæ©Ÿèƒ½
â”‚   â”œâ”€â”€ batchProcessor.js        # ãƒãƒƒãƒå‡¦ç†
â”‚   â”œâ”€â”€ configOptimizer.js       # è¨­å®šæœ€é©åŒ–
â”‚   â”œâ”€â”€ dataProcessors.js        # ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ»ãƒ•ã‚£ãƒ«ã‚¿
â”‚   â”œâ”€â”€ errorHandler.js          # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
â”‚   â”œâ”€â”€ municipalityManager.js   # è‡ªæ²»ä½“è¨­å®šç®¡ç†
â”‚   â”œâ”€â”€ qualityTools.js          # å“è³ªç®¡ç†ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ ticketDataConverter.js   # ãƒã‚±ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿å¤‰æ›
â”‚   â”œâ”€â”€ ticketOrchestrator.js    # ãƒ¡ã‚¤ãƒ³å‡¦ç†ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼
â”‚   â”œâ”€â”€ config.js                # åŸºæœ¬è¨­å®š
â”‚   â”œâ”€â”€ constants.js             # å®šæ•°å®šç¾©
â”‚   â””â”€â”€ ticket_detail_sidebar.html # ãƒã‚±ãƒƒãƒˆè©³ç´°UI
â””â”€â”€ slack/                       # Slacké–¢é€£æ©Ÿèƒ½
    â”œâ”€â”€ core.js                  # Slackæ ¸å¿ƒæ©Ÿèƒ½
    â”œâ”€â”€ data.js                  # Slackãƒ‡ãƒ¼ã‚¿å‡¦ç†
    â”œâ”€â”€ message.js               # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†
    â”œâ”€â”€ slackHelpers.js          # Slacké€šçŸ¥ãƒ˜ãƒ«ãƒ‘ãƒ¼
    â”œâ”€â”€ ui.js                    # Slack UI
    â””â”€â”€ README.md                # Slackæ©Ÿèƒ½ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### **ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆ**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          UI Layer                   â”‚  â† menu/
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Controller Layer               â”‚  â† relation/mainController.js
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Service Layer                  â”‚  â† relation/businessLogic.js
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Data Access Layer              â”‚  â† relation/dataService.js
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Utility Layer                  â”‚  â† relation/[utilities], slack/
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **è²¬å‹™åˆ†é›¢**

- **`docs/`**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- **`menu/`**: Google Apps Script UIãƒ»ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 
- **`relation/`**: re:lation APIç‰¹åŒ–æ©Ÿèƒ½ï¼ˆãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½ï¼‰
- **`slack/`**: Slackæ©Ÿèƒ½ã®å®Œå…¨åˆ†é›¢

## ğŸ”„ ä¸»è¦ãªæ”¹å–„

### **Before (ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å‰)**
- 565è¡Œã®å·¨å¤§ãªfetchTickets.js
- é‡è¤‡ã‚³ãƒ¼ãƒ‰ãŒ4ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«æ•£åœ¨
- relationæ©Ÿèƒ½ã¨slackæ©Ÿèƒ½ãŒæ··åœ¨
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒçµ±ä¸€ã•ã‚Œã¦ã„ãªã„

### **After (ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œ)**
- âœ… æ©Ÿèƒ½åˆ¥ã«æ˜ç¢ºåˆ†é›¢
- âœ… relation/slack ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåˆ†é›¢
- âœ… å˜ä¸€è²¬ä»»åŸå‰‡ã®å®Ÿç¾
- âœ… DRYåŸå‰‡ã®å¾¹åº•
- âœ… çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- âœ… æ§‹é€ åŒ–ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ 
- âœ… å“è³ªç®¡ç†ãƒ„ãƒ¼ãƒ«å†…è”µ

## ğŸ“ ä¸»è¦é–¢æ•°

### **ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ**
- `fetchOpenTickets()` - ãƒã‚±ãƒƒãƒˆå–å¾—
- `fetchCaseCategories()` - åˆ†é¡å–å¾—
- `fetchLabels()` - ãƒ©ãƒ™ãƒ«å–å¾—
- `fetchMessageBoxes()` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœãƒƒã‚¯ã‚¹å–å¾—

### **è¨ºæ–­ãƒ»æœ€é©åŒ–**
- `systemDiagnostics()` - ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­
- `advancedSystemCheck()` - é«˜åº¦ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- `generateConfigurationReport()` - è¨­å®šãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### **æ–°æ©Ÿèƒ½ã®å®Ÿè¡Œ**
```javascript
// ãƒ¡ã‚¤ãƒ³ã®ãƒã‚±ãƒƒãƒˆå–å¾—
fetchOpenTickets();

// ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­
advancedSystemCheck();

// è¨­å®šæœ€é©åŒ–ãƒ¬ãƒãƒ¼ãƒˆ
var report = generateConfigurationReport();
console.log(report);
```

### **ç›´æ¥ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼å‘¼ã³å‡ºã—**
```javascript
// ã‚ˆã‚Šè©³ç´°ãªåˆ¶å¾¡ãŒå¿…è¦ãªå ´åˆ
var summary = executeOpenTicketsFetch({
  enableNotifications: true,
  enableProgressDisplay: true,
  filters: { statuses: ['open', 'in_progress'] }
});
```

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

- **å®Œå…¨ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰å®Œå…¨é™¤å»æ¸ˆã¿
- **æ–°ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ**: relation/slack ã§æ©Ÿèƒ½å®Œå…¨åˆ†é›¢
- **ãƒ‘ã‚¹å¤‰æ›´**: æ–°ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã«åˆã‚ã›ã¦import/requireã‚’æ›´æ–°
- **Slackæ©Ÿèƒ½**: `slack/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å®Œå…¨åˆ†é›¢

ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®Œäº†æ—¥: 2025å¹´8æœˆ13æ—¥
