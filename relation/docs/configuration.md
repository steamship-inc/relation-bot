# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°

## è¨­å®šé …ç›®ä¸€è¦§

### ğŸ“®å—ä¿¡ç®±ã‚·ãƒ¼ãƒˆè¨­å®šé …ç›®

| åˆ—å | å‹ | å¿…é ˆ | èª¬æ˜ | ä¾‹ |
|---|---|---|---|---|
| è‡ªæ²»ä½“ID | æ–‡å­—åˆ— | â—‹ | è‡ªæ²»ä½“è­˜åˆ¥å­ | `yamaga` |
| è‡ªæ²»ä½“å | æ–‡å­—åˆ— | â—‹ | è¡¨ç¤ºç”¨è‡ªæ²»ä½“å | `å±±é¹¿å¸‚` |
| éƒ½é“åºœçœŒ | æ–‡å­—åˆ— | â—‹ | æ‰€åœ¨éƒ½é“åºœçœŒ | `ç†Šæœ¬çœŒ` |
| å—ä¿¡ç®±ID | æ•°å€¤ | â—‹ | re:lationãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœãƒƒã‚¯ã‚¹ID | `12345` |
| çµ„ç¹”å | æ–‡å­—åˆ— | - | re:lationä¸Šã®çµ„ç¹”å | `å±±é¹¿å¸‚å½¹æ‰€` |
| Slackãƒãƒ£ãƒ³ãƒãƒ« | æ–‡å­—åˆ— | â–³ | é€šçŸ¥å…ˆSlackãƒãƒ£ãƒ³ãƒãƒ« | `#yamaga-tickets` |
| é€šçŸ¥æœ‰åŠ¹ãƒ•ãƒ©ã‚° | ãƒ–ãƒ¼ãƒ«å€¤ | â–³ | Slacké€šçŸ¥ã®æœ‰åŠ¹/ç„¡åŠ¹ | `TRUE` |
| ãƒã‚±ãƒƒãƒˆæ¤œç´¢æ¡ä»¶(JSON) | JSONæ–‡å­—åˆ— | â–³ | æ¤œç´¢æ¡ä»¶è¨­å®š | å¾Œè¿°å‚ç…§ |
| Slacké€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ(JSON) | JSONæ–‡å­—åˆ— | â–³ | é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ | å¾Œè¿°å‚ç…§ |

## ãƒã‚±ãƒƒãƒˆæ¤œç´¢æ¡ä»¶è©³ç´°

### åŸºæœ¬æ§‹é€ 

```json
{
  "openTickets": {
    "status_cds": ["open"],
    "per_page": 100,
    "page": 1
  }
}
```

### è¨­å®šå¯èƒ½ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

#### status_cdsï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æŒ‡å®šï¼‰
ãƒã‚±ãƒƒãƒˆã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’é…åˆ—ã§æŒ‡å®š

| å€¤ | èª¬æ˜ |
|---|---|
| `"open"` | æœªå¯¾å¿œãƒã‚±ãƒƒãƒˆ |
| `"in_progress"` | å¯¾å¿œä¸­ãƒã‚±ãƒƒãƒˆ |
| `"closed"` | å®Œäº†ãƒã‚±ãƒƒãƒˆ |
| `"pending"` | ä¿ç•™ãƒã‚±ãƒƒãƒˆ |

**ä¾‹**: æœªå¯¾å¿œã¨å¯¾å¿œä¸­ã®ãƒã‚±ãƒƒãƒˆã‚’å–å¾—
```json
{
  "openTickets": {
    "status_cds": ["open", "in_progress"]
  }
}
```

#### per_pageï¼ˆå–å¾—ä»¶æ•°ï¼‰
1å›ã®APIå‘¼ã³å‡ºã—ã§å–å¾—ã™ã‚‹ãƒã‚±ãƒƒãƒˆæ•°

| å€¤ | èª¬æ˜ |
|---|---|
| 1-1000 | å–å¾—ä»¶æ•°ï¼ˆæ¨å¥¨: 50-100ï¼‰ |

#### pageï¼ˆãƒšãƒ¼ã‚¸ç•ªå·ï¼‰
å–å¾—ã™ã‚‹ãƒšãƒ¼ã‚¸ç•ªå·ï¼ˆé€šå¸¸ã¯1ã‚’æŒ‡å®šï¼‰

#### date_rangeï¼ˆæœŸé–“æŒ‡å®šï¼‰
ä½œæˆæ—¥ãƒ»æ›´æ–°æ—¥ã«ã‚ˆã‚‹æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿

```json
{
  "openTickets": {
    "status_cds": ["open"],
    "date_range": {
      "start": 7,  // 7æ—¥å‰ã‹ã‚‰
      "end": 0     // ç¾åœ¨ã¾ã§
    }
  }
}
```

#### case_category_idsï¼ˆåˆ†é¡æŒ‡å®šï¼‰
ç‰¹å®šã®ãƒã‚±ãƒƒãƒˆåˆ†é¡ã®ã¿ã‚’å–å¾—

```json
{
  "openTickets": {
    "status_cds": ["open"],
    "case_category_ids": [101, 102, 103]
  }
}
```

#### label_idsï¼ˆãƒ©ãƒ™ãƒ«æŒ‡å®šï¼‰
ç‰¹å®šã®ãƒ©ãƒ™ãƒ«ãŒä»˜ã„ãŸãƒã‚±ãƒƒãƒˆã®ã¿ã‚’å–å¾—

```json
{
  "openTickets": {
    "status_cds": ["open"],
    "label_ids": [201, 202]
  }
}
```

### è¨­å®šä¾‹é›†

#### åŸºæœ¬è¨­å®šï¼ˆæœªå¯¾å¿œãƒã‚±ãƒƒãƒˆã®ã¿ï¼‰
```json
{
  "openTickets": {
    "status_cds": ["open"],
    "per_page": 100,
    "page": 1
  }
}
```

#### æœŸé–“é™å®šè¨­å®šï¼ˆéå»7æ—¥é–“ã®æœªå¯¾å¿œãƒã‚±ãƒƒãƒˆï¼‰
```json
{
  "openTickets": {
    "status_cds": ["open"],
    "per_page": 100,
    "page": 1,
    "date_range": { "start": 7, "end": 0 }
  }
}
```

#### è¤‡æ•°ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¨­å®š
```json
{
  "openTickets": {
    "status_cds": ["open", "in_progress"],
    "per_page": 100,
    "page": 1
  },
  "closedTickets": {
    "status_cds": ["closed"],
    "per_page": 30,
    "date_range": { "start": 3, "end": 0 }
  }
}
```

#### åˆ†é¡ç‰¹åŒ–è¨­å®šï¼ˆé“è·¯ãƒ»å…¬åœ’é–¢é€£ã®ã¿ï¼‰
```json
{
  "openTickets": {
    "status_cds": ["open"],
    "per_page": 50,
    "case_category_ids": [101, 102, 105]
  }
}
```

## Slacké€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè©³ç´°

### åŸºæœ¬æ§‹é€ 

```json
{
  "headerTemplate": "ğŸ« *{municipalityName} - æœªå¯¾å¿œãƒã‚±ãƒƒãƒˆçŠ¶æ³å ±å‘Š*\n\nğŸ“Š æœªå¯¾å¿œãƒã‚±ãƒƒãƒˆæ•°: *{totalCount}ä»¶*\n\n",
  "ticketListHeader": "ğŸ“‹ *æœ€æ–°ãƒã‚±ãƒƒãƒˆï¼ˆä¸Šä½{displayCount}ä»¶ï¼‰:*\n",
  "ticketItemTemplate": "â€¢ <{ticketUrl}|#{ticketId}> {title}\n  ä½œæˆ: {createdAt} | æ›´æ–°: {updatedAt}\n",
  "remainingTicketsMessage": "\n... ä»– {remainingCount}ä»¶ã®ãƒã‚±ãƒƒãƒˆãŒã‚ã‚Šã¾ã™\n",
  "footerMessage": "\nğŸ’¡ è©³ç´°ã¯ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’ã”ç¢ºèªãã ã•ã„",
  "noTicketsMessage": "âœ… {municipalityName} - æœªå¯¾å¿œãƒã‚±ãƒƒãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ï¼",
  "maxDisplayCount": 5
}
```

### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé …ç›®

#### headerTemplate
é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ†

**åˆ©ç”¨å¯èƒ½å¤‰æ•°**:
- `{municipalityName}`: è‡ªæ²»ä½“å
- `{totalCount}`: æœªå¯¾å¿œãƒã‚±ãƒƒãƒˆç·æ•°

#### ticketListHeader
ãƒã‚±ãƒƒãƒˆä¸€è¦§ã®ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ†

**åˆ©ç”¨å¯èƒ½å¤‰æ•°**:
- `{displayCount}`: è¡¨ç¤ºãƒã‚±ãƒƒãƒˆä»¶æ•°

#### ticketItemTemplate
å€‹åˆ¥ãƒã‚±ãƒƒãƒˆã®è¡¨ç¤ºãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

**åˆ©ç”¨å¯èƒ½å¤‰æ•°**:
- `{ticketUrl}`: ãƒã‚±ãƒƒãƒˆè©³ç´°ãƒšãƒ¼ã‚¸URL
- `{ticketId}`: ãƒã‚±ãƒƒãƒˆID
- `{title}`: ãƒã‚±ãƒƒãƒˆã‚¿ã‚¤ãƒˆãƒ«
- `{createdAt}`: ä½œæˆæ—¥æ™‚ï¼ˆMM/dd HH:mmå½¢å¼ï¼‰
- `{updatedAt}`: æ›´æ–°æ—¥æ™‚ï¼ˆMM/dd HH:mmå½¢å¼ï¼‰

#### remainingTicketsMessage
æ®‹ã‚Šãƒã‚±ãƒƒãƒˆæ•°ã®è¡¨ç¤ºãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

**åˆ©ç”¨å¯èƒ½å¤‰æ•°**:
- `{remainingCount}`: æ®‹ã‚Šãƒã‚±ãƒƒãƒˆä»¶æ•°

#### footerMessage
é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ•ãƒƒã‚¿ãƒ¼éƒ¨åˆ†

#### noTicketsMessage
ãƒã‚±ãƒƒãƒˆãŒ0ä»¶ã®å ´åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

**åˆ©ç”¨å¯èƒ½å¤‰æ•°**:
- `{municipalityName}`: è‡ªæ²»ä½“å

#### maxDisplayCount
è¡¨ç¤ºã™ã‚‹æœ€å¤§ãƒã‚±ãƒƒãƒˆä»¶æ•°ï¼ˆæ•°å€¤ï¼‰

### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¾‹é›†

#### ã‚·ãƒ³ãƒ—ãƒ«ç‰ˆ
```json
{
  "headerTemplate": "ğŸ”” {municipalityName}ã®ãƒã‚±ãƒƒãƒˆçŠ¶æ³\næœªå¯¾å¿œ: {totalCount}ä»¶\n\n",
  "ticketListHeader": "æœ€æ–°{displayCount}ä»¶:\n",
  "ticketItemTemplate": "#{ticketId}: {title}\n",
  "footerMessage": "\nè©³ç´°ç¢ºèªâ†’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆ",
  "noTicketsMessage": "âœ… {municipalityName}: æœªå¯¾å¿œãƒã‚±ãƒƒãƒˆãªã—",
  "maxDisplayCount": 3
}
```

#### è©³ç´°ç‰ˆ
```json
{
  "headerTemplate": "ğŸš¨ ã€{municipalityName}ã€‘ç·Šæ€¥ãƒã‚±ãƒƒãƒˆçŠ¶æ³ãƒ¬ãƒãƒ¼ãƒˆ ğŸš¨\n\nğŸ“ˆ æœªå‡¦ç†ãƒã‚±ãƒƒãƒˆç·æ•°: **{totalCount}ä»¶**\nâš ï¸ å¯¾å¿œãŒå¿…è¦ã§ã™\n\n",
  "ticketListHeader": "ğŸ”¥ **å„ªå…ˆå¯¾å¿œãƒã‚±ãƒƒãƒˆï¼ˆä¸Šä½{displayCount}ä»¶ï¼‰**\n",
  "ticketItemTemplate": "ğŸ« <{ticketUrl}|ãƒã‚±ãƒƒãƒˆ#{ticketId}>\nğŸ“ **{title}**\nğŸ“… ç™»éŒ²: {createdAt} / æœ€çµ‚æ›´æ–°: {updatedAt}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n",
  "remainingTicketsMessage": "\nğŸ“Š **è¿½åŠ å¯¾å¿œå¾…ã¡: {remainingCount}ä»¶**\nå…¨ä»¶ç¢ºèªãŒå¿…è¦ã§ã™ï¼\n",
  "footerMessage": "\nğŸ”— **è©³ç´°ç¢ºèªãƒ»å¯¾å¿œçŠ¶æ³æ›´æ–°**\nğŸ‘‰ ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã§å…¨ä»¶ç¢ºèªã—ã¦ãã ã•ã„\nğŸ“ ç·Šæ€¥æ™‚ã¯ç›´æ¥é€£çµ¡ã‚’ãŠé¡˜ã„ã—ã¾ã™",
  "noTicketsMessage": "ğŸ‰ **{municipalityName}** ğŸ‰\nâœ¨ æœªå¯¾å¿œãƒã‚±ãƒƒãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ï¼\nğŸ‘ ãŠç–²ã‚Œæ§˜ã§ã—ãŸ",
  "maxDisplayCount": 8
}
```

#### éƒ¨ç½²åˆ¥ã‚«ã‚¹ã‚¿ãƒ ç‰ˆ
```json
{
  "headerTemplate": "ã€å¸‚æ°‘èª²ã€‘{municipalityName} ãƒã‚±ãƒƒãƒˆçŠ¶æ³\nå¯¾å¿œå¾…ã¡: {totalCount}ä»¶\n\n",
  "ticketListHeader": "æœ¬æ—¥ã®å‡¦ç†å¯¾è±¡ï¼ˆ{displayCount}ä»¶ï¼‰:\n",
  "ticketItemTemplate": "No.{ticketId} {title} (æ›´æ–°:{updatedAt})\n",
  "remainingTicketsMessage": "\nâ€»ä»–{remainingCount}ä»¶ã¯æ˜æ—¥ä»¥é™å¯¾å¿œäºˆå®š\n",
  "footerMessage": "\nå‡¦ç†å®Œäº†å¾Œã¯å¸‚æ°‘èª²ã¾ã§å ±å‘Šã—ã¦ãã ã•ã„",
  "noTicketsMessage": "å¸‚æ°‘èª²: {municipalityName}ã®æœ¬æ—¥åˆ†ã¯å®Œäº†ã§ã™",
  "maxDisplayCount": 10
}
```

## è¨­å®šå¤‰æ›´ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### JSONç·¨é›†æ™‚ã®æ³¨æ„ç‚¹
1. **æ§‹æ–‡ãƒã‚§ãƒƒã‚¯**: JSONæ§‹æ–‡ã®æ­£ç¢ºæ€§ã‚’ç¢ºèª
2. **ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—æ–‡å­—**: æ”¹è¡Œã¯`\n`ã€å¼•ç”¨ç¬¦ã¯`\"`ã‚’ä½¿ç”¨
3. **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**: å¤‰æ›´å¾Œã¯å¿…ãšãƒ†ã‚¹ãƒˆå®Ÿè¡Œã§å‹•ä½œç¢ºèª

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®
1. **per_page**: é©åˆ‡ãªä»¶æ•°è¨­å®šï¼ˆæ¨å¥¨: 50-100ï¼‰
2. **æ¡ä»¶çµã‚Šè¾¼ã¿**: ä¸è¦ãªãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã‚’é¿ã‘ã‚‹
3. **maxDisplayCount**: é©åˆ‡ãªè¡¨ç¤ºä»¶æ•°è¨­å®šï¼ˆæ¨å¥¨: 3-10ï¼‰

### é‹ç”¨ç®¡ç†
1. **è¨­å®šå±¥æ­´**: å¤‰æ›´å±¥æ­´ã®è¨˜éŒ²ãƒ»ç®¡ç†
2. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: é‡è¦ãªè¨­å®šã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¿å­˜
3. **å…±æœ‰**: è¨­å®šå¤‰æ›´ã®é–¢ä¿‚è€…ã¸ã®å…±æœ‰
